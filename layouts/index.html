{{ define "main" }}
  {{ $mainSections := .Site.Params.mainSections | default (slice "post") }}
  {{ $orderedCategories := slice
    (dict "slug" "data-visualization")
    (dict "slug" "data-wrangling")
    (dict "slug" "explainer")
  }}

  {{ range $orderedCategories }}
    {{ $term := $.Site.GetPage (printf "categories/%s" .slug) }}
    {{ if $term }}
      {{ $pages := where $term.Pages "Type" "in" $mainSections }}
      {{ if gt (len $pages) 0 }}
        <section class="home-category">
          <header class="home-category__header">
            <h2 class="home-category__title">
              <a href="{{ $term.Permalink }}">{{ $term.Title }}</a>
            </h2>
            {{ with $term.Description }}
              <p class="home-category__description">{{ . }}</p>
            {{ end }}
          </header>
          <div class="article-list article-list--three-column">
            {{ range $pages.ByDate.Reverse }}
              {{ partial "article-list/default" . }}
            {{ end }}
          </div>
        </section>
      {{ end }}
    {{ end }}
  {{ end }}

  {{- partial "footer/footer" . -}}
{{ end }}

{{ define "right-sidebar" }}
  {{ partial "sidebar/right.html" (dict "Context" . "Scope" "homepage") }}
{{ end }}
